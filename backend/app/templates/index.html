<html>
	<head>
		<title>GameSpace</title>
		<!-- Load favicon and other icons -->
		<link rel="apple-touch-icon" sizes="57x57"  href="{{ url_for('static', filename = 'apple-icon-57x57.png') }}">
		<link rel="apple-touch-icon" sizes="60x60" href="{{ url_for('static', filename = 'apple-icon-60x60.png') }}">
		<link rel="apple-touch-icon" sizes="72x72" href="{{ url_for('static', filename = 'apple-icon-72x72.png') }}">
		<link rel="apple-touch-icon" sizes="76x76" href="{{ url_for('static', filename = 'apple-icon-76x76.png') }}">
		<link rel="apple-touch-icon" sizes="114x114" href="{{ url_for('static', filename = 'apple-icon-114x114.png') }}">
		<link rel="apple-touch-icon" sizes="120x120" href="{{ url_for('static', filename = 'apple-icon-120x120.png') }}">
		<link rel="apple-touch-icon" sizes="144x144" href="{{ url_for('static', filename = 'apple-icon-144x144.png') }}">
		<link rel="apple-touch-icon" sizes="152x152" href="{{ url_for('static', filename = 'apple-icon-152x152.png') }}">
		<link rel="apple-touch-icon" sizes="180x180" href="{{ url_for('static', filename = 'apple-icon-180x180.png') }}">
		<link rel="icon" type="image/png" sizes="192x192"  href="{{ url_for('static', filename = 'android-icon-192x192.png') }}">
		<link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename = 'favicon-32x32.png') }}">
		<link rel="icon" type="image/png" sizes="96x96" href="{{ url_for('static', filename = 'favicon-96x96.png') }}">
		<link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename = 'favicon-16x16.png') }}">
		<link rel="manifest" href="{{ url_for('static', filename = 'manifest.json') }}">
		<meta name="msapplication-TileColor" content="#ffffff">
		<meta name="msapplication-TileImage" content="{{ url_for('static', filename = 'ms-icon-144x144.png') }}">
		<meta name="theme-color" content="#ffffff">
        <!-- Load Google font -->
        <link href='http://fonts.googleapis.com/css?family=Josefin+Sans:100,300,700' rel='stylesheet' type='text/css'>
		<script src="{{ url_for('static', filename = 'three.js') }}"></script>
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
        <script src="https://apis.google.com/js/client.js"></script>
        <script src="{{ url_for('static', filename = 'TrackballControls.js') }}"></script>
        <script src="{{ url_for('static', filename = 'bootstrap.js') }}"></script>
        <script src="{{ url_for('static', filename = 'virtualjoystick.js') }}"></script>
		<link rel="stylesheet" href="{{ url_for('static', filename = 'jquery-ui.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename = 'bootstrap.min.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename = 'bootstrap-theme.min.css') }}">
		<style>
		/*canvas {*/
		  /*display: block;*/
          /*width: 100%;*/
          /*height: 100%;*/
        /*}*/

        #mainWindow {
            overflow: hidden;
            width: 100%;
            height: 100%;
        }


        .html {
          overflow: hidden;
        }
        .body {
          overflow: hidden;
          color: #000000;
        }
        .navbar {
          font-family: 'Josefin Sans', sans-serif;
          background-color: #FF931E;
          border-radius: 0 !important;
        }
        .modal {
          // THIS IS WHERE THE 'GAMESPACE' TITLE TEXT STYLE IS DEFINED, SINCE IT'S PART OF THE LOADING MODAL
          width: 100%;
          border-radius: 0 !important;
          text-align: center;
          font-family: 'Josefin Sans', sans-serif;
		  <!--font-size: 200px;-->
		  font-weight: 100;
		  background-color: #000000;
		  // color:#57F7E0;
		  color:#FFFFFF;
		  // position: absolute;
		  // position: fixed;
		  // top: 35%;
		  // left: 50%;
		  // transform:translate(-50%, -50%);
		  // text-shadow: 0px 0 white, 0 2px white, 2px 0 white, 0 -2px white;
		  // text-shadow: 0px 0 #57F7E0, 0 -0px #57F7E0, 0px 0 #57F7E0, -1px 2px #57F7E0;
		  // text-shadow: 0px 0 #000000, 0 -0px #000000, 0px 0 #000000, -8px 12px #000000;
        }
        .modal-body {
          font-size: 13.9vw;
          font-weight: 100;
        }
        .navbar-text {
          font-size: 48px;
          line-height: 100%;
          color: white;
          margin-top: 100px;
          text-align: center;
          <!--margin: auto;-->
          margin-top: 100px;
        }
		p.gameTitle{
		  display:none;
		  background-color: rgba(0,0,0,0.35);
		  font-family: 'Josefin Sans', sans-serif;
		  font-size: 2.9vw;
		  font-weight: 700;
		  color:#fff;
		   -webkit-touch-callout: none;
	       -webkit-user-select: none;
	       -khtml-user-select: none;
	       -moz-user-select: none;
	       -ms-user-select: none;
	      text-shadow: 0px 0 #000000, 0 -0px #000000, 0px 0 #000000, -0.069vw 0.13809vw #000000;
	      user-select: none;
	      cursor: default;
		  position: absolute;
	      width: 100%;
	      height: 100%;
		}
		.gameTitleAndYear {
		  text-align: center;
		  position: relative;
		  top: 42%;
		}
		.ui-autocomplete {
		  max-height: 150px;
		  overflow-y: auto;
		  overflow-x: hidden;
		}
		.navbar-center {
		  text-align: center;
		  float: none;
		  display: inline-block;
		}
        .panel {
          border-radius: 0 !important;
        }
        iframe {
          frame-border: 0;
          background: #000000;
          border: 0px;
          border-radius: 0 !important;
        }
        .ui-dialog { {
          border: 0px;
          background: #ffffff;
          border-radius: 0 !important;
        }
        .ui-dialog-titlebar-close {
          background-color: #000000;
          border-radius: 0 !important;
        }
        .ui-widget-header {
          border: 0px;
          background: #ffffff;
          border-radius: 0 !important;
        }
        .panel {
          background-color: rgba(87,247,224,0.35);
        }
        .element {
          background-image: url("{{ url_for('static', filename = 'loading_bar.png') }}");
          background-color: #000000;
          border-radius: 0;
        }
		</style>

	</head>
	<body style="background-color: #000000; position:absolute;">
        <!-- Load in audio files -->
        <audio id="backgroundAudio" autoplay="autoplay" loop>
          <source src="{{ url_for('static', filename = 'background.mp3') }}" />
        </audio>
		<audio id="beginChime">
          <source src="{{ url_for('static', filename = 'begin.mp3') }}" />
        </audio>
        <audio id="gameSelectionSound">
          <source src="{{ url_for('static', filename = 'gameSelection.mp3') }}" />
        </audio>
		<audio id="toggleOnSound">
          <source src="{{ url_for('static', filename = 'toggleOn.mp3') }}" />
        </audio>
		<audio id="toggleOffSound">
          <source src="{{ url_for('static', filename = 'toggleOff.mp3') }}" />
        </audio>
		<audio id="iconClickSound">
          <source src="{{ url_for('static', filename = 'iconClick.mp3') }}" />
        </audio>
		<audio id="frameCloseSound">
          <source src="{{ url_for('static', filename = 'frameClose.mp3') }}" />
        </audio>
        <!-- Prepare play/pause audio control -->
        <a href="#noscroll" id="muteButtonHolder" style="position:absolute;padding-left:1.0417vw;padding-top:1.0417vw;padding-right:0.486vw;color:transparent;z-index:9999;">
            <img id="muteButton" src="{{ url_for('static', filename = 'audioOnIcon.png') }}" style="width:1.736vw;">
        </a>
        <!-- Prepare info icon that will bring up title-screen modal during exploration -->
        <a id="infoButtonHolder" data-toggle="modal" data-target="#myModal" style="position:absolute;padding-left:3.472vw;padding-top:0.972vw;padding-right:0.486vw;color:transparent;z-index:9998;cursor:pointer;display:none;">
          <img id="infoButton" src="{{ url_for('static', filename = 'infoIcon.png') }}" style="width:1.458vw;">
        </a>
        <!-- Prepare controller icon that will display controls modal during exploration -->
        <a id="controllerButtonHolder" data-toggle="modal" data-target="#controlsModal" style="position:absolute;padding-left:5.763vw;padding-top:1.111vw;color:transparent;z-index:9997;cursor:pointer;display:none;">
          <img id=controllerButton" src="{{ url_for('static', filename = 'controllerIcon.png') }}" style="width:1.944vw;">
        </a>
        <!-- Set up panes that will hold information about selected games -->
		<p id="gameTitleP" style="" class="gameTitle"><b> </b></p>
		<div style="position:absolute; display:none;" id="paneHolder"></div>
		<!--Sourcing-->
        <script src="{{ url_for('static', filename = 'game.js') }}"></script>
        <script src="{{ url_for('static', filename = 'main.js') }}"></script>
        <script src="{{ url_for('static', filename = 'jsapi.js') }}"></script>
		<!-- Title-screen modal -->
		<div class="modal fade" id="myModal" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  <div class="modal-dialog" style="margin-top: 5%;">
		    <div class="modal-content">
		      <div class="modal-body">
				  GameSpace
				  <div class="progress center-block">
				  <center><div class="progress-bar" role="progressbar" id="loadingProgress" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:2%;">
				  </div></center>
				</div>
				  <center><div id="projectInfo" style="display:none;"></div></center>
		      </div>
		      <div class="modal-footer">
                <!-- 'Begin' button that will appear upon all the data being loaded in -->
		        <center><button type="button" class="btn btn-default" id="gLaunch" data-dismiss="modal" style="text-weight:100" disabled>BEGIN</button></center>
                </div>
		    </div>
		  </div>
		</div>
        <!-- Controls modal -->
		<div class="modal fade" id="controlsModal" role="dialog" aria-labelledby="controlsModalLabel" aria-hidden="true">
		  <div class="modal-dialog" style="margin-top: 5%;">
		    <div class="modal-content">
		      <div class="modal-body">
				  <img src="{{ url_for('static', filename = 'controls.png') }}" style="height:70%;">
		      </div>
		      <div class="modal-footer"></div>
		    </div>
		  </div>
		</div>

        <div id="mainWindow"></div>
	    <script>
	    // Boot up GameSpace
		var game;
		$(document).ready(function(){
			// Allow any origin
			THREE.ImageUtils.crossOrigin = '';
			// Create main and initialize
			PATH_TO_STATIC_FOLDER = "{{ url_for('static', filename = '') }}";
			game = new Main(window.innerWidth, window.innerHeight, PATH_TO_STATIC_FOLDER, {{ starting_game_id }});
			game.init();
			// Update loop
			function gameUpdate(){
				game.update();
				window.requestAnimationFrame(gameUpdate, game.renderer.domElement);
			}
			gameUpdate();
		});
		// Hook up play/pause audio control
		var backgroundAudio = document.getElementById('backgroundAudio');
		var gameSelectionSound = document.getElementById('gameSelectionSound');
		var beginChime = document.getElementById('beginChime');
		var toggleOnSound = document.getElementById('toggleOnSound');
		var toggleOffSound = document.getElementById('toggleOffSound');
		var iconClickSound = document.getElementById('iconClickSound');
		var frameCloseSound = document.getElementById('frameCloseSound');
        document.getElementById('muteButtonHolder').addEventListener('click', function (e)
        {
            e = e || window.event;
            if(backgroundAudio.muted) {
                backgroundAudio.muted = false;
                gameSelectionSound.muted = false;
                beginChime.muted = false;
                toggleOnSound.muted = false;
                toggleOffSound.muted = false;
                iconClickSound.muted = false;
                frameCloseSound.muted = false;
                document.getElementById('muteButton').src = "{{ url_for('static', filename = 'audioOnIcon.png') }}";
            }
            else {
                backgroundAudio.muted = true;
                gameSelectionSound.muted = true;
                beginChime.muted = true;
                toggleOnSound.muted = true;
                toggleOffSound.muted = true;
                iconClickSound.muted = true;
                frameCloseSound.muted = true;
                document.getElementById('muteButton').src = "{{ url_for('static', filename = 'audioOffIcon.png') }}";
            }
            e.preventDefault();
        }, false);
		</script>
	</body>
<!-- <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-64301562-1', 'auto');
  ga('send', 'pageview');

</script> -->
</html>
